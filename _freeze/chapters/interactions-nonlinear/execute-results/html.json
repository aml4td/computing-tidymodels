{
  "hash": "ad93f6e5ba0a26c865b073665511a830",
  "result": {
    "engine": "knitr",
    "markdown": "---\nknitr:\n  opts_chunk:\n    cache.path: \"../_cache/interactions-nonlinear/\"\n---\n\n# Interactions and Nonlinear Features {#sec-interactions-nonlinear}\n\n\n\nThis chapter is focused on how predictors can enter the model in a nonlinear fashion. The three approaches discussed are interaction effects, basis expansions, and discretization. \n\n## Requirements\n\nYou’ll need 5 packages (<span class=\"pkg\"><a href=\"https://cran.r-project.org/package=aorsf\">aorsf</a></span>, <span class=\"pkg\"><a href=\"https://cran.r-project.org/package=embed\">embed</a></span>, <span class=\"pkg\"><a href=\"https://cran.r-project.org/package=gt\">gt</a></span>, <span class=\"pkg\"><a href=\"https://cran.r-project.org/package=hstats\">hstats</a></span>, and <span class=\"pkg\"><a href=\"https://cran.r-project.org/package=tidymodels\">tidymodels</a></span>) for this chapter. \nYou can install them via:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nreq_pkg <- c(\"aorsf\", \"embed\", \"gt\", \"hstats\", \"tidymodels\")\n\n# Check to see if they are installed: \npkg_installed <- vapply(req_pkg, rlang::is_installed, logical(1))\n\n# Install missing packages: \nif ( any(!pkg_installed) ) {\n  install_list <- names(pkg_installed)[!pkg_installed]\n  pak::pak(install_list)\n}\n```\n:::\n\n\nLet's load the meta package and manage some between-package function conflicts. \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(tidymodels)\nlibrary(embed)\ntidymodels_prefer()\ntheme_set(theme_bw())\n```\n:::\n\n\n## Interactions {#sec-interactions}\n\nAs the text mentions, interactions involve two or more predictors (of any data type). An interaction means that the relationship between the outcome and the predictors involved cannot be articulated by looking at one predictor at a time;  they act in concert.  \n\nTo get started, let's once again load the food delivery data and use the same split:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndata(deliveries, package = \"modeldata\")\n\nset.seed(991)\ndelivery_split <- initial_validation_split(deliveries, prop = c(0.6, 0.2), strata = time_to_delivery)\ndelivery_train <- training(delivery_split)\ndelivery_test  <- testing(delivery_split)\ndelivery_val   <- validation(delivery_split)\ndelivery_rs    <- validation_set(delivery_split)\n\n## Some functions to faciltate the content\n\ndec_to_time <- function(x) {\n  mins <- floor(x)\n  dec <- floor((x - mins) * 60)\n  res <- cli::pluralize(\"{mins} minutes{?s} and {dec} second{?s}\")\n  res <- as.character(res)\n  res <- gsub(\" and 0 seconds\", \"\", res)\n  res <- gsub(\"1 minutes\", \"1 minute\", res) \n  res\n}\n\ndec_to_time_rs <- function(x) {\n  collect_metrics(x) %>% \n    filter(.metric == \"mae\") %>% \n    pluck(\"mean\") %>% \n    dec_to_time\n}\n\n```\n:::\n\n\nWe’ll consider two mechanisms to encode interaction columns: via the base R formula method and with recipes. \n\n### Interactions with Model Formulas {#sec-interactions-via-formula}\n\nThis was briefly discussed in @sec-r-formulas. \n\nThe main operator that creates interactions is the colon. Using `a:b` within a formula will create the appropriate columns that encode the interactions. The specifics depend on what type of data are in columns `a` and `b`: \n\n- If both are numeric, an additional column, which is their product, is added to the model matrix. By default, the base R formula method gives it the name `\"a:b\"`. \n\n- If one is numeric and the other is categorical, R first converts the categorical (i.e., factor) column into binary indicator variables, then makes columns that are the produce of each indicator column and the original numeric column. \n\n- If both are categorical, indicators are made for both and then their corresponding product pairs are created (binary times binary columns). \n\nLet's make a small example to demonstrate: \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(gt)\n\ninteraction_example <- \n  delivery_test %>% \n  slice(1, .by = day) %>% \n  select(day, hour, distance) %>% \n  arrange(day)\n\ninteraction_example %>% gt()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"fgacxacsht\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#fgacxacsht table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#fgacxacsht thead, #fgacxacsht tbody, #fgacxacsht tfoot, #fgacxacsht tr, #fgacxacsht td, #fgacxacsht th {\n  border-style: none;\n}\n\n#fgacxacsht p {\n  margin: 0;\n  padding: 0;\n}\n\n#fgacxacsht .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#fgacxacsht .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#fgacxacsht .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#fgacxacsht .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#fgacxacsht .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#fgacxacsht .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#fgacxacsht .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#fgacxacsht .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#fgacxacsht .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#fgacxacsht .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#fgacxacsht .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#fgacxacsht .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#fgacxacsht .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#fgacxacsht .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#fgacxacsht .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#fgacxacsht .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#fgacxacsht .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#fgacxacsht .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#fgacxacsht .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#fgacxacsht .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#fgacxacsht .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#fgacxacsht .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#fgacxacsht .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#fgacxacsht .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#fgacxacsht .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#fgacxacsht .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#fgacxacsht .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#fgacxacsht .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#fgacxacsht .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#fgacxacsht .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#fgacxacsht .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#fgacxacsht .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#fgacxacsht .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#fgacxacsht .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#fgacxacsht .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#fgacxacsht .gt_left {\n  text-align: left;\n}\n\n#fgacxacsht .gt_center {\n  text-align: center;\n}\n\n#fgacxacsht .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#fgacxacsht .gt_font_normal {\n  font-weight: normal;\n}\n\n#fgacxacsht .gt_font_bold {\n  font-weight: bold;\n}\n\n#fgacxacsht .gt_font_italic {\n  font-style: italic;\n}\n\n#fgacxacsht .gt_super {\n  font-size: 65%;\n}\n\n#fgacxacsht .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#fgacxacsht .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#fgacxacsht .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#fgacxacsht .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#fgacxacsht .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#fgacxacsht .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#fgacxacsht .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#fgacxacsht .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#fgacxacsht div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"day\">day</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"hour\">hour</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"distance\">distance</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"day\" class=\"gt_row gt_center\">Mon</td>\n<td headers=\"hour\" class=\"gt_row gt_right\">19.38</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.59</td></tr>\n    <tr><td headers=\"day\" class=\"gt_row gt_center\">Tue</td>\n<td headers=\"hour\" class=\"gt_row gt_right\">12.14</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.40</td></tr>\n    <tr><td headers=\"day\" class=\"gt_row gt_center\">Wed</td>\n<td headers=\"hour\" class=\"gt_row gt_right\">18.03</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.96</td></tr>\n    <tr><td headers=\"day\" class=\"gt_row gt_center\">Thu</td>\n<td headers=\"hour\" class=\"gt_row gt_right\">16.22</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">3.25</td></tr>\n    <tr><td headers=\"day\" class=\"gt_row gt_center\">Fri</td>\n<td headers=\"hour\" class=\"gt_row gt_right\">12.88</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.88</td></tr>\n    <tr><td headers=\"day\" class=\"gt_row gt_center\">Sat</td>\n<td headers=\"hour\" class=\"gt_row gt_right\">12.94</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.47</td></tr>\n    <tr><td headers=\"day\" class=\"gt_row gt_center\">Sun</td>\n<td headers=\"hour\" class=\"gt_row gt_right\">12.96</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">3.80</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nFor two numeric predictors: \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmodel.matrix(~ hour + distance + hour:distance, interaction_example) %>% \n  as_tibble() %>% \n  select(-`(Intercept)`) %>% \n  gt()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"emttviarbx\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#emttviarbx table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#emttviarbx thead, #emttviarbx tbody, #emttviarbx tfoot, #emttviarbx tr, #emttviarbx td, #emttviarbx th {\n  border-style: none;\n}\n\n#emttviarbx p {\n  margin: 0;\n  padding: 0;\n}\n\n#emttviarbx .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#emttviarbx .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#emttviarbx .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#emttviarbx .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#emttviarbx .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#emttviarbx .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#emttviarbx .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#emttviarbx .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#emttviarbx .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#emttviarbx .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#emttviarbx .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#emttviarbx .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#emttviarbx .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#emttviarbx .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#emttviarbx .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#emttviarbx .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#emttviarbx .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#emttviarbx .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#emttviarbx .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#emttviarbx .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#emttviarbx .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#emttviarbx .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#emttviarbx .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#emttviarbx .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#emttviarbx .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#emttviarbx .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#emttviarbx .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#emttviarbx .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#emttviarbx .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#emttviarbx .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#emttviarbx .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#emttviarbx .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#emttviarbx .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#emttviarbx .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#emttviarbx .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#emttviarbx .gt_left {\n  text-align: left;\n}\n\n#emttviarbx .gt_center {\n  text-align: center;\n}\n\n#emttviarbx .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#emttviarbx .gt_font_normal {\n  font-weight: normal;\n}\n\n#emttviarbx .gt_font_bold {\n  font-weight: bold;\n}\n\n#emttviarbx .gt_font_italic {\n  font-style: italic;\n}\n\n#emttviarbx .gt_super {\n  font-size: 65%;\n}\n\n#emttviarbx .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#emttviarbx .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#emttviarbx .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#emttviarbx .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#emttviarbx .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#emttviarbx .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#emttviarbx .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#emttviarbx .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#emttviarbx div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"hour\">hour</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"distance\">distance</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"hour:distance\">hour:distance</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">19.38</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.59</td>\n<td headers=\"hour:distance\" class=\"gt_row gt_right\">50.19</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">12.14</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.40</td>\n<td headers=\"hour:distance\" class=\"gt_row gt_right\">29.14</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">18.03</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.96</td>\n<td headers=\"hour:distance\" class=\"gt_row gt_right\">53.36</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">16.22</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">3.25</td>\n<td headers=\"hour:distance\" class=\"gt_row gt_right\">52.71</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">12.88</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.88</td>\n<td headers=\"hour:distance\" class=\"gt_row gt_right\">37.09</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">12.94</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.47</td>\n<td headers=\"hour:distance\" class=\"gt_row gt_right\">31.97</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">12.96</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">3.80</td>\n<td headers=\"hour:distance\" class=\"gt_row gt_right\">49.26</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nOne numeric and one factor predictor: \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmodel.matrix(~ day + distance + day:distance, interaction_example) %>% \n  as_tibble() %>% \n  select(-`(Intercept)`) %>% \n  gt() |> \n  tab_style_body(style = cell_text(color = \"gray70\"), values = 0)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"zizjnjknvw\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#zizjnjknvw table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#zizjnjknvw thead, #zizjnjknvw tbody, #zizjnjknvw tfoot, #zizjnjknvw tr, #zizjnjknvw td, #zizjnjknvw th {\n  border-style: none;\n}\n\n#zizjnjknvw p {\n  margin: 0;\n  padding: 0;\n}\n\n#zizjnjknvw .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#zizjnjknvw .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#zizjnjknvw .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#zizjnjknvw .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#zizjnjknvw .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zizjnjknvw .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zizjnjknvw .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zizjnjknvw .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#zizjnjknvw .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#zizjnjknvw .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#zizjnjknvw .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#zizjnjknvw .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#zizjnjknvw .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#zizjnjknvw .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#zizjnjknvw .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#zizjnjknvw .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#zizjnjknvw .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#zizjnjknvw .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#zizjnjknvw .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zizjnjknvw .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#zizjnjknvw .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#zizjnjknvw .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#zizjnjknvw .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zizjnjknvw .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#zizjnjknvw .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#zizjnjknvw .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zizjnjknvw .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zizjnjknvw .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#zizjnjknvw .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zizjnjknvw .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#zizjnjknvw .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zizjnjknvw .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zizjnjknvw .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zizjnjknvw .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zizjnjknvw .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zizjnjknvw .gt_left {\n  text-align: left;\n}\n\n#zizjnjknvw .gt_center {\n  text-align: center;\n}\n\n#zizjnjknvw .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#zizjnjknvw .gt_font_normal {\n  font-weight: normal;\n}\n\n#zizjnjknvw .gt_font_bold {\n  font-weight: bold;\n}\n\n#zizjnjknvw .gt_font_italic {\n  font-style: italic;\n}\n\n#zizjnjknvw .gt_super {\n  font-size: 65%;\n}\n\n#zizjnjknvw .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#zizjnjknvw .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#zizjnjknvw .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#zizjnjknvw .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#zizjnjknvw .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#zizjnjknvw .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#zizjnjknvw .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#zizjnjknvw .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#zizjnjknvw div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"dayTue\">dayTue</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"dayWed\">dayWed</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"dayThu\">dayThu</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"dayFri\">dayFri</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"daySat\">daySat</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"daySun\">daySun</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"distance\">distance</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"dayTue:distance\">dayTue:distance</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"dayWed:distance\">dayWed:distance</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"dayThu:distance\">dayThu:distance</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"dayFri:distance\">dayFri:distance</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"daySat:distance\">daySat:distance</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"daySun:distance\">daySun:distance</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"dayTue\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayWed\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayThu\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayFri\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"daySat\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"daySun\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.59</td>\n<td headers=\"dayTue:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.0</td>\n<td headers=\"dayWed:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"dayThu:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"dayFri:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"daySat:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"daySun:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.0</td></tr>\n    <tr><td headers=\"dayTue\" class=\"gt_row gt_right\">1</td>\n<td headers=\"dayWed\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayThu\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayFri\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"daySat\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"daySun\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.40</td>\n<td headers=\"dayTue:distance\" class=\"gt_row gt_right\">2.4</td>\n<td headers=\"dayWed:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"dayThu:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"dayFri:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"daySat:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"daySun:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.0</td></tr>\n    <tr><td headers=\"dayTue\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayWed\" class=\"gt_row gt_right\">1</td>\n<td headers=\"dayThu\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayFri\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"daySat\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"daySun\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.96</td>\n<td headers=\"dayTue:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.0</td>\n<td headers=\"dayWed:distance\" class=\"gt_row gt_right\">2.96</td>\n<td headers=\"dayThu:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"dayFri:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"daySat:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"daySun:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.0</td></tr>\n    <tr><td headers=\"dayTue\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayWed\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayThu\" class=\"gt_row gt_right\">1</td>\n<td headers=\"dayFri\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"daySat\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"daySun\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">3.25</td>\n<td headers=\"dayTue:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.0</td>\n<td headers=\"dayWed:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"dayThu:distance\" class=\"gt_row gt_right\">3.25</td>\n<td headers=\"dayFri:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"daySat:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"daySun:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.0</td></tr>\n    <tr><td headers=\"dayTue\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayWed\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayThu\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayFri\" class=\"gt_row gt_right\">1</td>\n<td headers=\"daySat\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"daySun\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.88</td>\n<td headers=\"dayTue:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.0</td>\n<td headers=\"dayWed:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"dayThu:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"dayFri:distance\" class=\"gt_row gt_right\">2.88</td>\n<td headers=\"daySat:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"daySun:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.0</td></tr>\n    <tr><td headers=\"dayTue\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayWed\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayThu\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayFri\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"daySat\" class=\"gt_row gt_right\">1</td>\n<td headers=\"daySun\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.47</td>\n<td headers=\"dayTue:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.0</td>\n<td headers=\"dayWed:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"dayThu:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"dayFri:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"daySat:distance\" class=\"gt_row gt_right\">2.47</td>\n<td headers=\"daySun:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.0</td></tr>\n    <tr><td headers=\"dayTue\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayWed\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayThu\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"dayFri\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"daySat\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"daySun\" class=\"gt_row gt_right\">1</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">3.80</td>\n<td headers=\"dayTue:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.0</td>\n<td headers=\"dayWed:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"dayThu:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"dayFri:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"daySat:distance\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"daySun:distance\" class=\"gt_row gt_right\">3.8</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nIf you want to make all possible interactions, you can use the dot and exponent operator:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# All possible two-way interactions:\nmodel.matrix(~ (.)^2, interaction_example)\n\n# All possible two- and three-way interactions, etc:\nmodel.matrix(~ (.)^3, interaction_example)\n```\n:::\n\n\n### Interactions from Recipes {#sec-interactions-via-recipe}\n\nThe <span class=\"pkg\"><a href=\"https://cran.r-project.org/package=recipes\">recipes</a></span> has `step_interact()`. This step is very atypical since it uses a formula to specify the inputs (rather than a set of <span class=\"pkg\"><a href=\"https://cran.r-project.org/package=dplyr\">dplyr</a></span> selectors). It also requires all columns used to be already converted to indicators (perhaps using `step_dummy()`). \n\nThe formula passed to `step_interact()` also uses colons to declare interactions, but it has two special differences from base R formulas: \n\n - you can use <span class=\"pkg\"><a href=\"https://cran.r-project.org/package=dplyr\">dplyr</a></span> selectors to select the columns to interact with and\n - the resulting interaction columns use `_x_` as the default seperator in the names.  \n\nFor continuous/continuous interactions: \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nrecipe(~ hour + distance, data = interaction_example) %>% \n  step_interact(~ hour:distance) %>% \n  prep() %>% \n  bake(new_data = NULL) %>% \n  gt()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"kqeitxrjnl\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#kqeitxrjnl table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#kqeitxrjnl thead, #kqeitxrjnl tbody, #kqeitxrjnl tfoot, #kqeitxrjnl tr, #kqeitxrjnl td, #kqeitxrjnl th {\n  border-style: none;\n}\n\n#kqeitxrjnl p {\n  margin: 0;\n  padding: 0;\n}\n\n#kqeitxrjnl .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#kqeitxrjnl .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#kqeitxrjnl .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#kqeitxrjnl .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#kqeitxrjnl .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#kqeitxrjnl .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kqeitxrjnl .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#kqeitxrjnl .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#kqeitxrjnl .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#kqeitxrjnl .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#kqeitxrjnl .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#kqeitxrjnl .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#kqeitxrjnl .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#kqeitxrjnl .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#kqeitxrjnl .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#kqeitxrjnl .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#kqeitxrjnl .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#kqeitxrjnl .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#kqeitxrjnl .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kqeitxrjnl .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#kqeitxrjnl .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#kqeitxrjnl .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#kqeitxrjnl .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kqeitxrjnl .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#kqeitxrjnl .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#kqeitxrjnl .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kqeitxrjnl .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kqeitxrjnl .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#kqeitxrjnl .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kqeitxrjnl .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#kqeitxrjnl .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kqeitxrjnl .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#kqeitxrjnl .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kqeitxrjnl .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#kqeitxrjnl .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kqeitxrjnl .gt_left {\n  text-align: left;\n}\n\n#kqeitxrjnl .gt_center {\n  text-align: center;\n}\n\n#kqeitxrjnl .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#kqeitxrjnl .gt_font_normal {\n  font-weight: normal;\n}\n\n#kqeitxrjnl .gt_font_bold {\n  font-weight: bold;\n}\n\n#kqeitxrjnl .gt_font_italic {\n  font-style: italic;\n}\n\n#kqeitxrjnl .gt_super {\n  font-size: 65%;\n}\n\n#kqeitxrjnl .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#kqeitxrjnl .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#kqeitxrjnl .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#kqeitxrjnl .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#kqeitxrjnl .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#kqeitxrjnl .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#kqeitxrjnl .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#kqeitxrjnl .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#kqeitxrjnl div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"hour\">hour</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"distance\">distance</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"hour_x_distance\">hour_x_distance</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">19.38</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.59</td>\n<td headers=\"hour_x_distance\" class=\"gt_row gt_right\">50.19</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">12.14</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.40</td>\n<td headers=\"hour_x_distance\" class=\"gt_row gt_right\">29.14</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">18.03</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.96</td>\n<td headers=\"hour_x_distance\" class=\"gt_row gt_right\">53.36</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">16.22</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">3.25</td>\n<td headers=\"hour_x_distance\" class=\"gt_row gt_right\">52.71</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">12.88</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.88</td>\n<td headers=\"hour_x_distance\" class=\"gt_row gt_right\">37.09</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">12.94</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">2.47</td>\n<td headers=\"hour_x_distance\" class=\"gt_row gt_right\">31.97</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">12.96</td>\n<td headers=\"distance\" class=\"gt_row gt_right\">3.80</td>\n<td headers=\"hour_x_distance\" class=\"gt_row gt_right\">49.26</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nFor categorical/continuous combinations, we use `step_dummy()` first and then a selector to make the interactions\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nrecipe(~ day + hour, data = interaction_example) %>% \n  step_dummy(all_factor_predictors()) %>% \n  step_interact(~ starts_with(\"day_\"):hour) %>% \n  prep() %>% \n  bake(new_data = NULL) %>% \n  gt() |> \n  tab_style_body(style = cell_text(color = \"gray70\"), values = 0)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"vogzqwwijj\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#vogzqwwijj table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#vogzqwwijj thead, #vogzqwwijj tbody, #vogzqwwijj tfoot, #vogzqwwijj tr, #vogzqwwijj td, #vogzqwwijj th {\n  border-style: none;\n}\n\n#vogzqwwijj p {\n  margin: 0;\n  padding: 0;\n}\n\n#vogzqwwijj .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#vogzqwwijj .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#vogzqwwijj .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#vogzqwwijj .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#vogzqwwijj .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#vogzqwwijj .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vogzqwwijj .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#vogzqwwijj .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#vogzqwwijj .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#vogzqwwijj .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#vogzqwwijj .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#vogzqwwijj .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#vogzqwwijj .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#vogzqwwijj .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#vogzqwwijj .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#vogzqwwijj .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#vogzqwwijj .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#vogzqwwijj .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#vogzqwwijj .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vogzqwwijj .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#vogzqwwijj .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#vogzqwwijj .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#vogzqwwijj .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vogzqwwijj .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#vogzqwwijj .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#vogzqwwijj .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vogzqwwijj .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vogzqwwijj .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#vogzqwwijj .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vogzqwwijj .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#vogzqwwijj .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vogzqwwijj .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#vogzqwwijj .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vogzqwwijj .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#vogzqwwijj .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vogzqwwijj .gt_left {\n  text-align: left;\n}\n\n#vogzqwwijj .gt_center {\n  text-align: center;\n}\n\n#vogzqwwijj .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#vogzqwwijj .gt_font_normal {\n  font-weight: normal;\n}\n\n#vogzqwwijj .gt_font_bold {\n  font-weight: bold;\n}\n\n#vogzqwwijj .gt_font_italic {\n  font-style: italic;\n}\n\n#vogzqwwijj .gt_super {\n  font-size: 65%;\n}\n\n#vogzqwwijj .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#vogzqwwijj .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#vogzqwwijj .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#vogzqwwijj .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#vogzqwwijj .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#vogzqwwijj .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#vogzqwwijj .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#vogzqwwijj .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#vogzqwwijj div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"hour\">hour</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"day_Tue\">day_Tue</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"day_Wed\">day_Wed</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"day_Thu\">day_Thu</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"day_Fri\">day_Fri</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"day_Sat\">day_Sat</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"day_Sun\">day_Sun</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"day_Tue_x_hour\">day_Tue_x_hour</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"day_Wed_x_hour\">day_Wed_x_hour</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"day_Thu_x_hour\">day_Thu_x_hour</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"day_Fri_x_hour\">day_Fri_x_hour</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"day_Sat_x_hour\">day_Sat_x_hour</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"day_Sun_x_hour\">day_Sun_x_hour</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">19.38</td>\n<td headers=\"day_Tue\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Wed\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Thu\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Fri\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Sat\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Sun\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Tue_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Wed_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Thu_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Fri_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Sat_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Sun_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">12.14</td>\n<td headers=\"day_Tue\" class=\"gt_row gt_right\">1</td>\n<td headers=\"day_Wed\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Thu\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Fri\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Sat\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Sun\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Tue_x_hour\" class=\"gt_row gt_right\">12.14</td>\n<td headers=\"day_Wed_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Thu_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Fri_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Sat_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Sun_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">18.03</td>\n<td headers=\"day_Tue\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Wed\" class=\"gt_row gt_right\">1</td>\n<td headers=\"day_Thu\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Fri\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Sat\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Sun\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Tue_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Wed_x_hour\" class=\"gt_row gt_right\">18.03</td>\n<td headers=\"day_Thu_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Fri_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Sat_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Sun_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">16.22</td>\n<td headers=\"day_Tue\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Wed\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Thu\" class=\"gt_row gt_right\">1</td>\n<td headers=\"day_Fri\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Sat\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Sun\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Tue_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Wed_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Thu_x_hour\" class=\"gt_row gt_right\">16.22</td>\n<td headers=\"day_Fri_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Sat_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Sun_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">12.88</td>\n<td headers=\"day_Tue\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Wed\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Thu\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Fri\" class=\"gt_row gt_right\">1</td>\n<td headers=\"day_Sat\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Sun\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Tue_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Wed_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Thu_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Fri_x_hour\" class=\"gt_row gt_right\">12.88</td>\n<td headers=\"day_Sat_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Sun_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">12.94</td>\n<td headers=\"day_Tue\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Wed\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Thu\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Fri\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Sat\" class=\"gt_row gt_right\">1</td>\n<td headers=\"day_Sun\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Tue_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Wed_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Thu_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Fri_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Sat_x_hour\" class=\"gt_row gt_right\">12.94</td>\n<td headers=\"day_Sun_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td></tr>\n    <tr><td headers=\"hour\" class=\"gt_row gt_right\">12.96</td>\n<td headers=\"day_Tue\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Wed\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Thu\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Fri\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Sat\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0</td>\n<td headers=\"day_Sun\" class=\"gt_row gt_right\">1</td>\n<td headers=\"day_Tue_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Wed_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Thu_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Fri_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Sat_x_hour\" class=\"gt_row gt_right\" style=\"color: #B3B3B3;\">0.00</td>\n<td headers=\"day_Sun_x_hour\" class=\"gt_row gt_right\">12.96</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n<a href=\"https://aml4td.org/chapters/interactions-nonlinear.html#sec-interactions\" >{{< fa solid rotate-left size=small >}}</a>\n\n### Detecting Interactions {#sec-interactions-detection} \n\nA few different packages can compute $H$-statistics (and similar quantities): \n\n- <span class=\"pkg\"><a href=\"https://cran.r-project.org/package=hstats\">hstats</a></span>\n- <span class=\"pkg\"><a href=\"https://cran.r-project.org/package=pre\">pre</a></span>, specifically the [`interact()`](https://github.com/marjoleinF/pre?tab=readme-ov-file#assessing-presence-of-interactions) and `bsnullinteract()` functions\n- <span class=\"pkg\"><a href=\"https://cran.r-project.org/package=bartMachine\">bartMachine</a></span> has `interaction_investigator()`\n- <span class=\"pkg\"><a href=\"https://cran.r-project.org/package=aorsf\">aorsf</a></span> has [`orsf_vint()`](https://docs.ropensci.org/aorsf/reference/orsf_vint.html)\n\nand so on. We’ll focus on the first since the other functions are tied to specific models. \n\nFor this chapter, we fit an oblique random forest model to compute the $H$-statistics. We'll defer the details of that model fit until a later chapter but the code was: \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(aorsf)\n\np <- ncol(delivery_train) - 1\n\nset.seed(1)\norf_fit <- orsf(time_to_delivery ~ ., data = delivery_train, mtry = p, n_tree = 50)\n```\n:::\n\n\n_Any_ ML model can be used with the <span class=\"pkg\"><a href=\"https://cran.r-project.org/package=hstats\">hstats</a></span> package. We'll use the validation set to compute the values; this lends more validity to the values (although we could have used the training set). There are a lot of computations here; this may take a bit to compute: \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(hstats)\n\nset.seed(218)\norf_hstats <-\n  hstats(orf_fit,\n         X = delivery_val %>% dplyr::select(-time_to_delivery),\n         # Prioritize the top 10 individual predictors for computing potential\n         # pairwise interactions.\n         pairwise_m = 10,\n         # We can run a little faster by using quantiles to approximate the \n         # predictor distributions. \n         approx = TRUE,\n         # How many random data points are used for the computations.\n         n_max = 1000,\n         verbose = FALSE)\n\norf_two_way_int_obj <- h2_pairwise(orf_hstats, zero = TRUE)\norf_two_way_int_obj\n#> Pairwise H^2 (normalized)\n#>                       [,1]\n#> hour:day         6.638e-02\n#> item_01:item_10  2.630e-02\n#> day:distance     1.537e-02\n#> hour:distance    4.625e-03\n#> item_10:item_24  4.068e-03\n#> day:item_10      4.029e-03\n#> day:item_24      1.895e-03\n#> day:item_01      1.735e-03\n#> item_07:item_24  1.212e-03\n#> item_01:item_24  1.147e-03\n#> distance:item_24 1.049e-03\n#> item_01:item_07  1.029e-03\n#> item_08:item_10  9.518e-04\n#> item_02:item_03  8.588e-04\n#> distance:item_10 7.465e-04\n#> day:item_02      7.325e-04\n#> item_03:item_07  6.213e-04\n#> day:item_03      6.019e-04\n#> item_01:item_08  5.968e-04\n#> day:item_07      5.850e-04\n#> item_08:item_24  5.735e-04\n#> distance:item_02 5.594e-04\n#> item_02:item_24  5.575e-04\n#> distance:item_03 5.289e-04\n#> item_07:item_10  5.270e-04\n#> distance:item_07 4.937e-04\n#> distance:item_01 4.759e-04\n#> item_03:item_24  4.147e-04\n#> item_03:item_10  3.572e-04\n#> hour:item_10     3.538e-04\n#> hour:item_01     2.629e-04\n#> hour:item_24     2.167e-04\n#> item_07:item_08  1.913e-04\n#> day:item_08      1.824e-04\n#> hour:item_08     1.766e-04\n#> item_02:item_10  1.736e-04\n#> distance:item_08 1.679e-04\n#> item_02:item_07  1.580e-04\n#> item_03:item_08  1.532e-04\n#> hour:item_02     1.504e-04\n#> hour:item_03     1.376e-04\n#> item_01:item_03  1.009e-04\n#> item_01:item_02  9.249e-05\n#> item_02:item_08  4.083e-05\n#> hour:item_07     3.459e-05\n```\n:::\n\n\nFrom these results, we could add more terms by adding another layer of `step_interact()` to our recipe.\n\n<a href=\"https://aml4td.org/chapters/interactions-nonlinear.html#sec-interactions-detection\" >{{< fa solid rotate-left size=small >}}</a>\n\n## Polynomial Basis Expansions {#sec-polynomials}\n\nThere are two main functions that produce different types of orthogonal polynomials: \n\n - `step_poly()` wrapping `stats::poly()`\n - `step_poly_bernstein()` wrapping `splines2::bernsteinPoly()`. \n \nWe can pass the columns of interest to each step: \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nrecipe(time_to_delivery ~ ., data = delivery_train) %>% \n  step_poly(hour, degree = 4) %>% \n  prep() %>% \n  bake(new_data = NULL, starts_with(\"hour\"))\n#> # A tibble: 6,004 × 4\n#>   hour_poly_1 hour_poly_2 hour_poly_3 hour_poly_4\n#>         <dbl>       <dbl>       <dbl>       <dbl>\n#> 1   -0.02318    0.02240     -0.01758     0.008000\n#> 2    0.01558    0.01027     -0.003123   -0.01343 \n#> 3    0.01105   -0.0003742   -0.01174    -0.01039 \n#> 4   -0.002365  -0.01319      0.004819    0.01182 \n#> 5   -0.01761    0.006275     0.009360   -0.01725 \n#> 6   -0.02321    0.02249     -0.01777     0.008254\n#> # ℹ 5,998 more rows\n\n# or\n\nrecipe(time_to_delivery ~ ., data = delivery_train) %>% \n  step_poly_bernstein(hour, degree = 4) %>% \n  prep() %>% \n  bake(new_data = NULL, starts_with(\"hour\"))\n#> # A tibble: 6,004 × 4\n#>    hour_1  hour_2   hour_3     hour_4\n#>     <dbl>   <dbl>    <dbl>      <dbl>\n#> 1 0.2593  0.03588 0.002207 0.00005090\n#> 2 0.01665 0.1209  0.3899   0.4717    \n#> 3 0.05106 0.2201  0.4216   0.3028    \n#> 4 0.2658  0.3742  0.2342   0.05495   \n#> 5 0.4047  0.1437  0.02267  0.001341  \n#> 6 0.2582  0.03549 0.002169 0.00004969\n#> # ℹ 5,998 more rows\n```\n:::\n\n\nIf we would like different polynomial degrees for different columns, we would call the step multiple times. \n\n<a href=\"https://aml4td.org/chapters/interactions-nonlinear.html#sec-polynomials\" >{{< fa solid rotate-left size=small >}}</a>\n\n## Spline Functions {#sec-splines}\n\n<span class=\"pkg\"><a href=\"https://cran.r-project.org/package=recipes\">recipes</a></span> has several spline steps: \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\napropos(\"step_spline\")\n#> [1] \"step_spline_b\"           \"step_spline_convex\"      \"step_spline_monotone\"   \n#> [4] \"step_spline_natural\"     \"step_spline_nonnegative\"\n```\n:::\n\n\nThe syntax is almost identical to the polynomial steps. For example, for natural splines: \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nrecipe(time_to_delivery ~ ., data = delivery_train) %>% \n  step_spline_natural(hour, deg_free = 4) %>% \n  prep() %>% \n  bake(new_data = NULL, starts_with(\"hour\"))\n#> # A tibble: 6,004 × 4\n#>   hour_1   hour_2  hour_3  hour_4\n#>    <dbl>    <dbl>   <dbl>   <dbl>\n#> 1 0.1970 0.004302 0       0      \n#> 2 0      0.06326  0.4307  0.3122 \n#> 3 0      0.2167   0.4816  0.2611 \n#> 4 0.2030 0.6655   0.03618 0.01668\n#> 5 0.3939 0.05003  0       0      \n#> 6 0.1959 0.004225 0       0      \n#> # ℹ 5,998 more rows\n```\n:::\n\n\nSome steps also have arguments for the spline degree called `degree`. Also, most basis expansion function steps have an option called `options` to pass additional specifications, such as a vector of knots. \n\n<a href=\"https://aml4td.org/chapters/interactions-nonlinear.html#sec-splines\" >{{< fa solid rotate-left size=small >}}</a>\n\n## Discretization\n\nThere is one step in <span class=\"pkg\"><a href=\"https://cran.r-project.org/package=recipes\">recipes</a></span> that conducts unsupervised binning called `step_discretize()` and the <span class=\"pkg\"><a href=\"https://cran.r-project.org/package=embed\">embed</a></span> package has two for supervised methods: `step_discretize_cart()` and `step_discretize_xgb()`. \n\nFor unsupervised binning: \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nbasic_binning <- \n  recipe(time_to_delivery ~ ., data = delivery_train) %>% \n  step_discretize(hour, num_breaks = 4) %>% \n  prep()\n\nbake(basic_binning, new_data = NULL, hour)\n#> # A tibble: 6,004 × 1\n#>   hour \n#>   <fct>\n#> 1 bin1 \n#> 2 bin4 \n#> 3 bin4 \n#> 4 bin2 \n#> 5 bin1 \n#> 6 bin1 \n#> # ℹ 5,998 more rows\n```\n:::\n\n\nThe `hour` column has been converted to a factor. There is also an argument called `min_unique` that defines the \"line of dignity\" for the binning. If this value is less than the number of data points per bin that would occur for the value of `num_breaks`, binning is not used.  \n\nTo understand where the breakpoints reside, the `tidy()` method will show them: \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntidy(basic_binning, number = 1)\n#> # A tibble: 5 × 3\n#>   terms   value id              \n#>   <chr>   <dbl> <chr>           \n#> 1 hour  -Inf    discretize_eoInz\n#> 2 hour    14.48 discretize_eoInz\n#> 3 hour    16.57 discretize_eoInz\n#> 4 hour    18.21 discretize_eoInz\n#> 5 hour   Inf    discretize_eoInz\n\n# note: \nquantile(delivery_train$hour, probs = (0:4) / 4)\n#>    0%   25%   50%   75%  100% \n#> 11.07 14.48 16.57 18.21 20.92\n```\n:::\n\n\nThe use of infinite bounds allows data falling outside of the range of the training set to be processed.\n\nIf you want to use custom breakpoints, `recipes::step_cut()` is also available. \n\nFor supervised methods, the syntax is different in two ways. First, the outcome column is specified using the `outcome` argument. Secondly, additional parameters control the complexity of the results (i.e., the number of bins). These depend on the binning models. for CART binning, the arguments are `cost_complexity`, `tree_depth`, and `min_n`. They are different for the step that uses boosted trees. \n\nThe format of the results is very similar though: \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(embed)\ncart_binning <-\n  recipe(time_to_delivery ~ ., data = delivery_train) %>%\n  step_discretize_cart(hour,\n                       outcome = vars(time_to_delivery),\n                       cost_complexity = 0.001) %>%\n  prep()\n\nbake(cart_binning, new_data = NULL, hour)\n#> # A tibble: 6,004 × 1\n#>   hour         \n#>   <fct>        \n#> 1 [-Inf,12.28) \n#> 2 [18.97,19.68)\n#> 3 [16.63,18.97)\n#> 4 [15.73,16.24)\n#> 5 [12.28,13.23)\n#> 6 [-Inf,12.28) \n#> # ℹ 5,998 more rows\n\ntidy(cart_binning, number = 1)\n#> # A tibble: 11 × 3\n#>   terms value id                   \n#>   <chr> <dbl> <chr>                \n#> 1 hour  12.28 discretize_cart_ChWJu\n#> 2 hour  13.23 discretize_cart_ChWJu\n#> 3 hour  13.96 discretize_cart_ChWJu\n#> 4 hour  14.77 discretize_cart_ChWJu\n#> 5 hour  15.73 discretize_cart_ChWJu\n#> 6 hour  16.24 discretize_cart_ChWJu\n#> # ℹ 5 more rows\n```\n:::\n\n\nAs you can see, the breakpoints are built into the factor levels. \n\n<a href=\"https://aml4td.org/chapters/interactions-nonlinear.html#discretization\" >{{< fa solid rotate-left size=small >}}</a>\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}